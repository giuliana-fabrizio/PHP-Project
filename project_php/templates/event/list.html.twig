{% extends 'base.html.twig' %}

{% block title %}Liste des évènements{% endblock %}

{% block body %}
<div class="mt-3">

    <h1 class="mb-5">Liste des évènements</h1>

    <div class="d-flex justify-content-center row">
        <div class="col-12 col-sm-3 p-0">
            {% if app.request.pathInfo == '/events' %}
                {% include 'event/filters.html.twig' %}
            {% endif %}
        </div>

        <div class="col-12
                    {% if app.request.pathInfo == '/events' %}
                        col-sm-9
                    {% endif %}">
            <table class="table text-center">
                <thead>
                    <tr style="background: #F1F5F9;">
                        <td>Nom de l'évènement</td>
                        <td>Date de début</td>
                        <td>Description</td>
                        <td>Places restantes</td>
                        <td></td>
                    </tr>
                </thead>

                <tbody>
                     {% for event in pagination %}
                        {% if event.isPublic or is_granted('IS_AUTHENTICATED_FULLY') %}
                            <tr>
                                <th class="p-4">{{ event.title }}</th>
                                <td class="p-4 text-gray">{{ event.datetimeStart|date('d/m/Y') }}</td>
                                <td class="p-4 text-gray">{{ event.description }}</td>
                                <td class="p-4 text-gray">
                                    {% if event.participantCount == event.participants|length %}
                                        <span class="badge badge-danger p-1">Complet</span>
                                    {% else %}
                                        <span class="badge badge-success p-1">{{ event.remainingPlaces }} places restantes</span>
                                    {% endif %}
                                </td>
                                <td class="p-4">
                                    <a href="{{ path('detail_event', {'id': event.id}) }}" class="text-dark">
                                        <i class="bi bi-plus-circle"></i>
                                    </a>
                                </td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                </tbody>
            </table>
        </div>
    <div>
</div>
<div class="pagination">
    {{ knp_pagination_render(pagination) }}
</div>

<style>
    .card-header {
        background-color: white;
    }
    .text-gray {
        color: gray;
    }
    .fs-5 i {
        font-size: 1.2rem;
    }
</style>
{% endblock %}
